$(document).ready(function(){$("#p2").change(function(a){$(this).is(":checked")?$("#mp2").removeAttr("disabled"):($("#mp2").attr("disabled",!0),$("#mp2").val(0))}),$("#seek").click(function(){var a=$("#rut").val();$.ajax({type:"post",url:"../../model/persona/seekvivienda.php",data:"r="+a,beforeSend:function(){$("#b").html(" Buscando...")},error:function(){alert("Ocurrio un error"),$("#b").html("")},success:function(a){"0"==a?($("#b").addClass("text text-danger"),$("#b").html(" Esta persona no se encuentra registrada en la base de datos.")):(a=$.parseJSON(a),null!=a.rol?($("#b").html(""),$("#viv input:text").removeAttr("disabled"),$("#viv select").removeAttr("disabled"),$("#viv input:checkbox").removeAttr("disabled"),$("#rol").val(a.rol),$("#foj").val(a.foj),$("#ar").val(a.ar),$("#mp1").val(a.mp1),0!=a.mp2||null!=a.mp2?($("#p2").prop("checked",!0),$("#mp2").removeAttr("disabled"),$("#mp2").val(a.mp2)):($("#p2").prop("checked",!1),$("#mp2").val(0)),$("#ac").val(a.ac),$("#tv").val(a.tv),$("#st").val(a.st),$("#cv").val(a.cv),$("#num").val(a.num),$("#nom").html(a.nom),$("#idr").val(a.idr),$("#tms").html(a.tms),$("#tms").addClass("text text-primary"),$("#edit").removeAttr("disabled"),$("#del").removeAttr("disabled")):($("#b").html(""),$("#nom").html(a.nom),$("#viv input:text").removeAttr("disabled"),$("#viv select").removeAttr("disabled"),$("#viv input:checkbox").prop("checked",!1),$("#viv input:checkbox").removeAttr("disabled"),$("#p2").prop("checked",!1)&&$("#mp2").attr("disabled",!0),$("#grab").removeAttr("disabled"),$("#del").removeAttr("disabled")))}})}),$("#grab").click(function(){var b=($("#rut").val(),$("#rol").val());""==b&&alert("no hay valor");$("#foj").val(),$("#ar").val(),$("#mp1").val();if(""==$("#mp2").val());else{$("#mp2").val()}$("#ac").val(),$("#tv").val(),$("#st").val(),$("#cv").val();$.ajax({type:"post",url:"../../model/persona/insvivienda.php",data:$("#viv").serialize(),beforeSend:function(){window.scroll(0,1),$("#b").html(" Enviando datos...")},error:function(){alert("Ocurrio un error")},success:function(a){$("#b").html(""),$("#resp").addClass("alert alert-success"),$("#resp").html(a),$("#resp").append('<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>'),$("#viv input:text").val(""),$("#viv input:text").attr("disabled",!0),$("#viv input:checkbox").prop("checked",!1),$("#viv input:checkbox").attr("disabled",!0),$("#viv select").val(0),$("#viv select").attr("disabled",!0),$("#rut").removeAttr("disabled"),$("#seek").removeAttr("disabled")}})}),$("#edit").click(function(){$("#rut").val(),$("#rol").val(),$("#foj").val(),$("#ar").val(),$("#mp1").val();if(""==$("#mp2").val());else{$("#mp2").val()}$("#ac").val(),$("#tv").val(),$("#st").val(),$("#cv").val();$.ajax({type:"post",url:"../../model/persona/upvivienda.php",data:$("#viv").serialize(),beforeSend:function(){$("#b").html(" Actualizando informaci\xf3n")},error:function(){alert("Ocurrio un error")},success:function(a){$("#b").html(""),$("#nom").html(""),$("#resp").addClass("alert alert-success"),$("#resp").html(a),$("#resp").append('<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>'),$("#viv input:text").val(""),$("#viv input:text").attr("disabled",!0),$("#viv input:checkbox").prop("checked",!1),$("#viv input:checkbox").attr("disabled",!0),$("#viv select").val(0),$("#viv select").attr("disabled",!0),$("#rut").removeAttr("disabled"),$("#seek").removeAttr("disabled")}})}),$("#del").click(function(){var a="Seguro que desea cancelar?";confirm(a)&&(location.href="../../view/persona/")})});